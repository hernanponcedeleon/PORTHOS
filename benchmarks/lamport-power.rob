Thread 0
i <- 1;
While (y1 != i)
  x := i;
  sync;
  y1 <- y;
  sync;
  While (y1 != 0)
    x := i;
    sync;
    y1 <- y;
  y := i;
  sync;
  x1 <- x;
  sync;
  if (x1 == i)
    y1 <- i
  else
    y1 <- y;
a <- 0;
y := a

Thread 1
j <- 2;
While (y1 != i)
  x := j;
  sync;
  y2 <- y;
  sync;
  While (y1 != 0)
    x := j;
    sync;
    y2 <- y;
  y := j;
  sync;
  x2 <- x;
  sync;
  if (x1 == i)
    y2 <- j
  else
    y2 <- y;
b <- 0;
y := b

Thread 2
k <- 3;
While (y1 != i)
  x := k;
  sync;
  y3 <- y;
  sync;
  While (y1 != 0)
    x := k;
    sync;
    y3 <- y;
  y := k;
  sync;
  x3 <- x;
  sync;
  if (x1 == i)
    y3 <- k
  else
    y3 <- y;
c <- 0;
y := c
