Thread 0
cnt <- CCF;
a <- (cnt + 1);
CCF := a;
a <- 666;
BUFF := a;
sync;
a <- (cnt + 2);
CCF := a

Thread 1
cnt_b <- CCF;
cnt_e <- CCF;
lwsync;
While (cnt_b != cnt_e or (cnt_b % 2) == 1)
  cnt_b <- CCF;
  lwsync;
  value <- BUFF;
  cnt_e <- CCF
